/*
 * Created by OPGOOG.COM
 * Date: 2011-10-12
 * Hour: 12:08
 */
using System;
using System.Collections.Generic;

public class GameModule : BlueVex.IGameModule
{
    #region " Module Info "
    string BlueVex.IGameModule.Author { get { return "OPGOOG"; } }
    string BlueVex.IGameModule.AboutInfo { get { return "OPGOOG.COM"; } }
    string BlueVex.IGameModule.Name { get { return "D2NTExploitFix"; } }
    string BlueVex.IGameModule.ReleaseDate { get { return "2011101202"; } }
    string BlueVex.IGameModule.Version { get { return "0.01"; } }
    #endregion

    private BlueVex.IGame Game;
    
    void BlueVex.IGameModule.Initialize(ref BlueVex.IGame Game)
    {
        this.Game = Game;
        Game.OnReceiveMessage += new BlueVex.IGame.OnReceiveMessageEventHandler(Game_OnReceiveMessage);
        Game.OnSendMessage += new BlueVex.IGame.OnSendMessageEventHandler(Game_OnSendMessage);
    }

    void Game_OnSendMessage(D2Packets.GameClient.SendMessage Packet, ref BlueVex.Packet.PacketFlag Flag)
    {
        if (Packet.message.Length > 100)
        {
            Flag = BlueVex.Packet.PacketFlag.PacketFlag_Virtual;
        }
    }

    void Game_OnReceiveMessage(D2Packets.GameServer.GameMessage Packet, ref BlueVex.Packet.PacketFlag Flag)
    {
        if (Packet.MessageType == D2Data.GameMessageType.GameMessage)
        {
            if (Packet.Message.Length > 100)
            {
                Flag = BlueVex.Packet.PacketFlag.PacketFlag_Virtual;
            }
        }
    }
    public void Destroy() { }
    public void Update() { }
}